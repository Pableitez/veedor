/**
 * Tests b√°sicos para Veedor
 * Ejecutar en consola del navegador para verificar funcionalidades
 */

// Test Suite para Veedor
const VeedorTests = {
    
    /**
     * Ejecuta todos los tests
     */
    runAll() {
        console.log('üß™ Iniciando tests de Veedor...');
        this.testModalFunctions();
        this.testThemeToggle();
        this.testValidation();
        this.testStorage();
        this.testDashboard();
        console.log('‚úÖ Tests completados');
    },
    
    /**
     * Test de funciones de modal
     */
    testModalFunctions() {
        console.log('üîç Testing modal functions...');
        
        // Test openModal
        try {
            openModal('privacy-modal');
            const modal = document.getElementById('privacy-modal');
            if (modal && modal.style.display === 'flex') {
                console.log('‚úÖ openModal funciona correctamente');
            } else {
                console.error('‚ùå openModal fall√≥');
            }
            closeModal('privacy-modal');
        } catch (error) {
            console.error('‚ùå Error en test de modal:', error);
        }
    },
    
    /**
     * Test de cambio de tema
     */
    testThemeToggle() {
        console.log('üîç Testing theme toggle...');
        
        try {
            const initialTheme = document.documentElement.getAttribute('data-theme');
            toggleTheme();
            const newTheme = document.documentElement.getAttribute('data-theme');
            
            if (newTheme !== initialTheme) {
                console.log('‚úÖ Theme toggle funciona correctamente');
                // Restaurar tema original
                document.documentElement.setAttribute('data-theme', initialTheme);
            } else {
                console.error('‚ùå Theme toggle fall√≥');
            }
        } catch (error) {
            console.error('‚ùå Error en test de tema:', error);
        }
    },
    
    /**
     * Test de validaciones
     */
    testValidation() {
        console.log('üîç Testing validation...');
        
        try {
            // Test validaci√≥n de email
            const validEmail = 'test@example.com';
            const invalidEmail = 'invalid-email';
            
            // Simular validaci√≥n b√°sica
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (emailRegex.test(validEmail) && !emailRegex.test(invalidEmail)) {
                console.log('‚úÖ Validaci√≥n de email funciona correctamente');
            } else {
                console.error('‚ùå Validaci√≥n de email fall√≥');
            }
        } catch (error) {
            console.error('‚ùå Error en test de validaci√≥n:', error);
        }
    },
    
    /**
     * Test de almacenamiento
     */
    testStorage() {
        console.log('üîç Testing storage...');
        
        try {
            const testKey = 'veedor-test';
            const testData = { test: 'data', timestamp: Date.now() };
            
            // Test localStorage
            localStorage.setItem(testKey, JSON.stringify(testData));
            const retrieved = JSON.parse(localStorage.getItem(testKey));
            
            if (retrieved && retrieved.test === testData.test) {
                console.log('‚úÖ Storage funciona correctamente');
                localStorage.removeItem(testKey);
            } else {
                console.error('‚ùå Storage fall√≥');
            }
        } catch (error) {
            console.error('‚ùå Error en test de storage:', error);
        }
    },
    
    /**
     * Test del dashboard
     */
    testDashboard() {
        console.log('üîç Testing dashboard...');
        
        try {
            // Verificar que el dashboard existe
            const dashboard = document.getElementById('dashboard');
            if (dashboard) {
                console.log('‚úÖ Dashboard existe');
                
                // Verificar tabs del dashboard
                const tabs = dashboard.querySelectorAll('.dashboard-nav button');
                if (tabs.length > 0) {
                    console.log(`‚úÖ Dashboard tiene ${tabs.length} tabs`);
                } else {
                    console.error('‚ùå Dashboard no tiene tabs');
                }
            } else {
                console.error('‚ùå Dashboard no encontrado');
            }
        } catch (error) {
            console.error('‚ùå Error en test de dashboard:', error);
        }
    }
};

// Hacer disponible globalmente
window.VeedorTests = VeedorTests;

// Auto-ejecutar tests si est√° en modo desarrollo
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    console.log('üöÄ Modo desarrollo detectado. Ejecuta VeedorTests.runAll() para correr los tests');
}
