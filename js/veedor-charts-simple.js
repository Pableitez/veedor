// ========================================
// VEEDOR CHARTS - VERSI√ìN SIMPLE Y DIRECTA
// ========================================

console.log('üöÄ VEEDOR CHARTS SIMPLE INICIANDO...');

// Funci√≥n para crear datos de demo
function createDemoData() {
    const demoTransactions = [
        {
            id: 'demo-1',
            type: 'income',
            amount: 3000,
            category: 'Salario',
            description: 'Salario mensual',
            date: new Date().toISOString().split('T')[0]
        },
        {
            id: 'demo-2',
            type: 'expense',
            amount: 800,
            category: 'Vivienda',
            description: 'Alquiler',
            date: new Date().toISOString().split('T')[0]
        },
        {
            id: 'demo-3',
            type: 'expense',
            amount: 300,
            category: 'Alimentaci√≥n',
            description: 'Supermercado',
            date: new Date().toISOString().split('T')[0]
        },
        {
            id: 'demo-4',
            type: 'expense',
            amount: 150,
            category: 'Transporte',
            description: 'Gasolina',
            date: new Date().toISOString().split('T')[0]
        },
        {
            id: 'demo-5',
            type: 'expense',
            amount: 200,
            category: 'Alimentaci√≥n',
            description: 'Restaurante',
            date: new Date(Date.now() - 86400000).toISOString().split('T')[0]
        },
        {
            id: 'demo-6',
            type: 'expense',
            amount: 50,
            category: 'Transporte',
            description: 'Metro/Bus',
            date: new Date(Date.now() - 172800000).toISOString().split('T')[0]
        },
        {
            id: 'demo-7',
            type: 'expense',
            amount: 100,
            category: 'Entretenimiento',
            description: 'Cine',
            date: new Date(Date.now() - 259200000).toISOString().split('T')[0]
        },
        {
            id: 'demo-8',
            type: 'expense',
            amount: 75,
            category: 'Salud',
            description: 'Farmacia',
            date: new Date(Date.now() - 345600000).toISOString().split('T')[0]
        }
    ];
    
    localStorage.setItem('veedorTransactions', JSON.stringify(demoTransactions));
    console.log('‚úÖ Datos de demo creados:', demoTransactions.length, 'transacciones');
    return demoTransactions;
}

// Funci√≥n para crear gr√°fica de categor√≠as
function createCategoryChart() {
    console.log('üìä Creando gr√°fica de categor√≠as...');
    
    const canvas = document.getElementById('overviewCategoryChart');
    if (!canvas) {
        console.log('‚ùå Canvas overviewCategoryChart no encontrado');
        return;
    }

    if (typeof Chart === 'undefined') {
        console.log('‚ùå Chart.js no disponible');
        return;
    }

    // Destruir gr√°fico existente si existe
    if (window.overviewCategoryChart && typeof window.overviewCategoryChart.destroy === 'function') {
        window.overviewCategoryChart.destroy();
    }

    // Datos de ejemplo
    const data = {
        labels: ['Vivienda', 'Alimentaci√≥n', 'Transporte', 'Entretenimiento', 'Salud'],
        datasets: [{
            data: [800, 500, 200, 100, 75],
            backgroundColor: [
                '#8B5CF6',
                '#3B82F6', 
                '#10B981',
                '#F59E0B',
                '#EF4444'
            ],
            borderWidth: 0,
            hoverOffset: 4
        }]
    };

    try {
        window.overviewCategoryChart = new Chart(canvas, {
            type: 'doughnut',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            padding: 20,
                            font: {
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((context.parsed / total) * 100).toFixed(1);
                                return `${context.label}: ‚Ç¨${context.parsed.toFixed(2)} (${percentage}%)`;
                            }
                        }
                    }
                },
                cutout: '60%',
                animation: {
                    animateRotate: true,
                    duration: 1000,
                    easing: 'easeOutQuart'
                }
            }
        });
        console.log('‚úÖ Gr√°fica de categor√≠as creada exitosamente');
    } catch (error) {
        console.error('‚ùå Error creando gr√°fica de categor√≠as:', error);
    }
}

// Funci√≥n para crear gr√°fica de tendencias
function createTrendsChart() {
    console.log('üìà Creando gr√°fica de tendencias...');
    
    const canvas = document.getElementById('overviewTrendsChart');
    if (!canvas) {
        console.log('‚ùå Canvas overviewTrendsChart no encontrado');
        return;
    }

    if (typeof Chart === 'undefined') {
        console.log('‚ùå Chart.js no disponible');
        return;
    }

    // Destruir gr√°fico existente si existe
    if (window.overviewTrendsChart && typeof window.overviewTrendsChart.destroy === 'function') {
        window.overviewTrendsChart.destroy();
    }

    // Datos de ejemplo
    const data = {
        labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
        datasets: [{
            label: 'Ingresos',
            data: [2800, 3000, 3200, 3000, 3100, 3000],
            borderColor: '#10B981',
            backgroundColor: 'rgba(16, 185, 129, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4
        }, {
            label: 'Gastos',
            data: [1200, 1350, 1400, 1300, 1450, 1675],
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4
        }]
    };

    try {
        window.overviewTrendsChart = new Chart(canvas, {
            type: 'line',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 20,
                            font: {
                                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ‚Ç¨${context.parsed.y.toFixed(2)}`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '‚Ç¨' + value.toFixed(0);
                            }
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                animation: {
                    duration: 1000,
                    easing: 'easeOutQuart'
                }
            }
        });
        console.log('‚úÖ Gr√°fica de tendencias creada exitosamente');
    } catch (error) {
        console.error('‚ùå Error creando gr√°fica de tendencias:', error);
    }
}

// Funci√≥n para crear gr√°fica de resumen financiero
function createIncomeExpensesChart() {
    console.log('üìä Creando gr√°fica de resumen financiero...');
    
    const canvas = document.getElementById('overviewIncomeExpensesChart');
    if (!canvas) {
        console.log('‚ùå Canvas overviewIncomeExpensesChart no encontrado');
        return;
    }

    if (typeof Chart === 'undefined') {
        console.log('‚ùå Chart.js no disponible');
        return;
    }

    // Destruir gr√°fico existente si existe
    if (window.overviewIncomeExpensesChart && typeof window.overviewIncomeExpensesChart.destroy === 'function') {
        window.overviewIncomeExpensesChart.destroy();
    }

    // Datos de ejemplo
    const data = {
        labels: ['Ingresos', 'Gastos', 'Ahorro'],
        datasets: [{
            data: [3000, 1675, 1325],
            backgroundColor: [
                'rgba(16, 185, 129, 0.8)',
                'rgba(239, 68, 68, 0.8)',
                'rgba(59, 130, 246, 0.8)'
            ],
            borderColor: [
                '#10B981',
                '#EF4444',
                '#3B82F6'
            ],
            borderWidth: 2,
            borderRadius: 8,
            borderSkipped: false
        }]
    };

    try {
        window.overviewIncomeExpensesChart = new Chart(canvas, {
            type: 'bar',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.label}: ‚Ç¨${context.parsed.y.toFixed(2)}`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '‚Ç¨' + value.toFixed(0);
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                },
                animation: {
                    duration: 1000,
                    easing: 'easeOutQuart'
                }
            }
        });
        console.log('‚úÖ Gr√°fica de resumen financiero creada exitosamente');
    } catch (error) {
        console.error('‚ùå Error creando gr√°fica de resumen financiero:', error);
    }
}

// Funci√≥n para actualizar el resumen financiero
function updateFinancialSummary() {
    console.log('üí∞ Actualizando resumen financiero...');
    
    const elements = {
        balance: document.querySelector('.balance-amount'),
        income: document.querySelector('.income-amount'),
        expenses: document.querySelector('.expenses-amount'),
        savings: document.querySelector('.savings-amount')
    };
    
    if (elements.balance) {
        elements.balance.textContent = '‚Ç¨1,525.00';
        console.log('‚úÖ Balance actualizado');
    } else {
        console.log('‚ùå Elemento balance-amount no encontrado');
    }
    
    if (elements.income) {
        elements.income.textContent = '‚Ç¨3,000.00';
        console.log('‚úÖ Ingresos actualizados');
    } else {
        console.log('‚ùå Elemento income-amount no encontrado');
    }
    
    if (elements.expenses) {
        elements.expenses.textContent = '‚Ç¨1,675.00';
        console.log('‚úÖ Gastos actualizados');
    } else {
        console.log('‚ùå Elemento expenses-amount no encontrado');
    }
    
    if (elements.savings) {
        elements.savings.textContent = '‚Ç¨1,325.00';
        console.log('‚úÖ Ahorro actualizado');
    } else {
        console.log('‚ùå Elemento savings-amount no encontrado');
    }
}

// Funci√≥n para actualizar transacciones recientes
function updateRecentTransactions() {
    console.log('üìù Actualizando transacciones recientes...');
    
    const container = document.querySelector('.recent-transactions');
    if (!container) {
        console.log('‚ùå Container recent-transactions no encontrado');
        return;
    }

    const transactions = [
        { description: 'Salario mensual', category: 'Salario', amount: 3000, type: 'income' },
        { description: 'Alquiler', category: 'Vivienda', amount: 800, type: 'expense' },
        { description: 'Supermercado', category: 'Alimentaci√≥n', amount: 300, type: 'expense' },
        { description: 'Gasolina', category: 'Transporte', amount: 150, type: 'expense' },
        { description: 'Restaurante', category: 'Alimentaci√≥n', amount: 200, type: 'expense' }
    ];

    container.innerHTML = transactions.map(transaction => `
        <div class="transaction-item">
            <div class="transaction-info">
                <span class="transaction-description">${transaction.description}</span>
                <span class="transaction-category">${transaction.category}</span>
            </div>
            <div class="transaction-amount ${transaction.type}">
                ${transaction.type === 'income' ? '+' : '-'}‚Ç¨${transaction.amount.toFixed(2)}
            </div>
        </div>
    `).join('');
    
    console.log('‚úÖ Transacciones recientes actualizadas');
}

// Funci√≥n principal para inicializar todo
function initializeDashboard() {
    console.log('=== INICIALIZANDO DASHBOARD SIMPLE ===');
    
    // 1. Crear datos de demo
    createDemoData();
    
    // 2. Actualizar resumen financiero
    updateFinancialSummary();
    
    // 3. Actualizar transacciones recientes
    updateRecentTransactions();
    
    // 4. Actualizar patrimonio neto
    updateNetWorth();
    
    // 5. Crear gr√°ficas si Chart.js est√° disponible
    if (typeof Chart !== 'undefined') {
        console.log('‚úÖ Chart.js disponible, creando gr√°ficas...');
        createCategoryChart();
        createTrendsChart();
        createIncomeExpensesChart();
    } else {
        console.log('‚ùå Chart.js no disponible, esperando...');
        // Reintentar despu√©s de un tiempo
        setTimeout(() => {
            if (typeof Chart !== 'undefined') {
                console.log('‚úÖ Chart.js disponible en segundo intento');
                createCategoryChart();
                createTrendsChart();
                createIncomeExpensesChart();
            } else {
                console.log('‚ùå Chart.js sigue sin estar disponible');
            }
        }, 1000);
    }
    
    console.log('=== DASHBOARD SIMPLE INICIALIZADO ===');
}

// Funci√≥n de debug para verificar el estado
function debugCharts() {
    console.log('=== DEBUG CHARTS SIMPLE ===');
    console.log('Chart.js disponible:', typeof Chart !== 'undefined');
    
    const canvas1 = document.getElementById('overviewCategoryChart');
    const canvas2 = document.getElementById('overviewTrendsChart');
    const canvas3 = document.getElementById('overviewIncomeExpensesChart');
    
    console.log('Canvas encontrados:', {
        categoryChart: !!canvas1,
        trendsChart: !!canvas2,
        incomeExpensesChart: !!canvas3
    });
    
    if (canvas1) console.log('Canvas 1 dimensions:', canvas1.offsetWidth, 'x', canvas1.offsetHeight);
    if (canvas2) console.log('Canvas 2 dimensions:', canvas2.offsetWidth, 'x', canvas2.offsetHeight);
    if (canvas3) console.log('Canvas 3 dimensions:', canvas3.offsetWidth, 'x', canvas3.offsetHeight);
    
    // Verificar elementos del resumen financiero
    const elements = [
        '.balance-amount',
        '.income-amount', 
        '.expenses-amount',
        '.savings-amount',
        '.recent-transactions'
    ];
    
    elements.forEach(selector => {
        const element = document.querySelector(selector);
        console.log(`${selector}:`, element ? '‚úÖ Encontrado' : '‚ùå No encontrado');
    });
    
    // Verificar gr√°ficas creadas
    const charts = [
        'overviewCategoryChart',
        'overviewTrendsChart',
        'overviewIncomeExpensesChart'
    ];
    
    charts.forEach(chartName => {
        const chart = window[chartName];
        console.log(`${chartName}:`, chart ? '‚úÖ Creada' : '‚ùå No creada');
    });
}

// Funci√≥n para actualizar patrimonio neto
function updateNetWorth() {
    console.log('üí∞ Actualizando patrimonio neto...');
    
    // Datos de ejemplo para patrimonio
    const netWorthData = {
        totalAssets: 52180,
        totalLiabilities: 6950,
        netWorth: 45230,
        monthlyChange: 2150
    };
    
    // Actualizar elementos del patrimonio
    const netWorthValue = document.getElementById('net-worth-value');
    const netWorthChange = document.getElementById('net-worth-change');
    const totalAssets = document.getElementById('total-assets');
    const totalLiabilities = document.getElementById('total-liabilities');
    
    if (netWorthValue) {
        netWorthValue.textContent = `‚Ç¨${netWorthData.netWorth.toLocaleString()}`;
        console.log('‚úÖ Patrimonio neto actualizado');
    } else {
        console.log('‚ùå Elemento net-worth-value no encontrado');
    }
    
    if (netWorthChange) {
        netWorthChange.textContent = `+‚Ç¨${netWorthData.monthlyChange.toLocaleString()} este mes`;
        console.log('‚úÖ Cambio mensual actualizado');
    } else {
        console.log('‚ùå Elemento net-worth-change no encontrado');
    }
    
    if (totalAssets) {
        totalAssets.textContent = `‚Ç¨${netWorthData.totalAssets.toLocaleString()}`;
        console.log('‚úÖ Total activos actualizado');
    } else {
        console.log('‚ùå Elemento total-assets no encontrado');
    }
    
    if (totalLiabilities) {
        totalLiabilities.textContent = `‚Ç¨${netWorthData.totalLiabilities.toLocaleString()}`;
        console.log('‚úÖ Total pasivos actualizado');
    } else {
        console.log('‚ùå Elemento total-liabilities no encontrado');
    }
}

// Funci√≥n para actualizar lista de activos
function updateAssetsList() {
    console.log('üìà Actualizando lista de activos...');
    
    const container = document.getElementById('assets-list');
    if (!container) {
        console.log('‚ùå Container assets-list no encontrado');
        return;
    }

    const assets = [
        { name: 'Cuenta Corriente', amount: 8500, type: 'bank' },
        { name: 'Cuenta de Ahorros', amount: 12000, type: 'bank' },
        { name: 'Inversiones', amount: 8500, type: 'investment' },
        { name: 'Coche', amount: 15000, type: 'vehicle' },
        { name: 'Propiedad', amount: 8500, type: 'property' }
    ];

    container.innerHTML = assets.map(asset => `
        <div class="asset-item">
            <div class="asset-info">
                <span class="asset-name">${asset.name}</span>
                <span class="asset-type">${asset.type}</span>
            </div>
            <div class="asset-amount positive">
                ‚Ç¨${asset.amount.toLocaleString()}
            </div>
        </div>
    `).join('');
    
    console.log('‚úÖ Lista de activos actualizada:', assets.length, 'activos');
}

// Funci√≥n para actualizar lista de pasivos
function updateLiabilitiesList() {
    console.log('üìâ Actualizando lista de pasivos...');
    
    const container = document.getElementById('liabilities-list');
    if (!container) {
        console.log('‚ùå Container liabilities-list no encontrado');
        return;
    }

    const liabilities = [
        { name: 'Hipoteca', amount: 4500, type: 'mortgage', interest: 2.5 },
        { name: 'Pr√©stamo Coche', amount: 1200, type: 'loan', interest: 4.2 },
        { name: 'Tarjeta de Cr√©dito', amount: 800, type: 'credit', interest: 18.5 },
        { name: 'Pr√©stamo Personal', amount: 450, type: 'loan', interest: 6.8 }
    ];

    container.innerHTML = liabilities.map(liability => `
        <div class="liability-item">
            <div class="liability-info">
                <span class="liability-name">${liability.name}</span>
                <span class="liability-type">${liability.type} (${liability.interest}%)</span>
            </div>
            <div class="liability-amount negative">
                ‚Ç¨${liability.amount.toLocaleString()}
            </div>
        </div>
    `).join('');
    
    console.log('‚úÖ Lista de pasivos actualizada:', liabilities.length, 'pasivos');
}

// Funci√≥n para actualizar insights de amortizaci√≥n
function updateAmortizationInsights() {
    console.log('üí° Actualizando insights de amortizaci√≥n...');
    
    const container = document.getElementById('liability-insights');
    if (!container) {
        console.log('‚ùå Container liability-insights no encontrado');
        return;
    }

    const insights = [
        {
            title: 'Prioridad de Amortizaci√≥n',
            content: 'Amortiza primero la Tarjeta de Cr√©dito (18.5% inter√©s) para ahorrar ‚Ç¨148/a√±o',
            action: 'Optimizar'
        },
        {
            title: 'Impacto en Patrimonio',
            content: 'Reducir deudas en ‚Ç¨1,000 aumentar√≠a tu patrimonio neto en ‚Ç¨1,000',
            action: 'Calcular'
        },
        {
            title: 'Recomendaci√≥n Inteligente',
            content: 'Con ‚Ç¨500/mes extra, podr√≠as eliminar la Tarjeta de Cr√©dito en 1.6 meses',
            action: 'Planificar'
        }
    ];
    
    container.innerHTML = insights.map(insight => `
        <div class="insight-card">
            <div class="insight-icon">üí°</div>
            <div class="insight-content">
                <h4>${insight.title}</h4>
                <p>${insight.content}</p>
                <div class="insight-action">
                    <button class="btn btn-sm btn-outline">${insight.action}</button>
                </div>
            </div>
        </div>
    `).join('');
    
    console.log('‚úÖ Insights de amortizaci√≥n actualizados');
}

// Funci√≥n para cargar pesta√±a de patrimonio
function loadAssetsTab() {
    console.log('üè† Cargando pesta√±a de patrimonio...');
    
    const container = document.getElementById('assets');
    if (container) {
        // Actualizar listas de activos y pasivos
        updateAssetsList();
        updateLiabilitiesList();
        updateAmortizationInsights();
        
        console.log('‚úÖ Pesta√±a de patrimonio cargada');
    }
}

// Funciones para modales de patrimonio
function showAddAssetModal() {
    console.log('‚ûï Mostrando modal de nuevo activo...');
    alert('Funcionalidad de nuevo activo en desarrollo');
}

function showAddLiabilityModal() {
    console.log('‚ûï Mostrando modal de nuevo pasivo...');
    alert('Funcionalidad de nuevo pasivo en desarrollo');
}

function showAssetsList() {
    console.log('üìã Mostrando lista de activos...');
    showTab('assets');
}

function showLiabilitiesList() {
    console.log('üìã Mostrando lista de pasivos...');
    showTab('assets');
}

function showNetWorthSettings() {
    console.log('‚öôÔ∏è Mostrando configuraci√≥n de patrimonio...');
    alert('Funcionalidad de configuraci√≥n en desarrollo');
}

// Funci√≥n para cambiar pesta√±as
function showTab(tabName) {
    console.log('Cambiando a pesta√±a:', tabName);
    
    // Ocultar todas las pesta√±as
    document.querySelectorAll('.tab-panel, .dashboard-tab').forEach(tab => {
        tab.classList.remove('active');
    });

    // Remover clase active de todos los botones
    document.querySelectorAll('.nav-tab').forEach(btn => {
        btn.classList.remove('active');
    });

    // Mostrar pesta√±a seleccionada
    const selectedTab = document.getElementById(`${tabName}-tab`) || document.getElementById(tabName);
    const selectedBtn = document.querySelector(`[data-tab="${tabName}"]`);

    if (selectedTab) {
        selectedTab.classList.add('active');
        console.log('‚úÖ Pesta√±a activada:', selectedTab.id);
    } else {
        console.log('‚ùå Pesta√±a no encontrada:', `${tabName}-tab`);
    }
    
    if (selectedBtn) {
        selectedBtn.classList.add('active');
        console.log('‚úÖ Bot√≥n activado:', selectedBtn);
    } else {
        console.log('‚ùå Bot√≥n no encontrado para:', tabName);
    }

    // Cargar contenido espec√≠fico de la pesta√±a
    switch (tabName) {
        case 'overview':
            updateFinancialSummary();
            updateRecentTransactions();
            updateNetWorth();
            updateAllCharts();
            break;
        case 'transactions':
            console.log('üìù Cargando pesta√±a de transacciones...');
            break;
        case 'budgets':
            console.log('üí∞ Cargando pesta√±a de presupuestos...');
            break;
        case 'analytics':
            console.log('üìä Cargando pesta√±a de an√°lisis...');
            break;
        case 'goals':
            console.log('üéØ Cargando pesta√±a de objetivos...');
            break;
        case 'assets':
            loadAssetsTab();
            break;
        default:
            console.log('‚ùì Pesta√±a desconocida:', tabName);
    }
}

// Funci√≥n para actualizar todas las gr√°ficas
function updateAllCharts() {
    console.log('üìä Actualizando todas las gr√°ficas...');
    
    if (typeof Chart !== 'undefined') {
        createCategoryChart();
        createTrendsChart();
        createIncomeExpensesChart();
        console.log('‚úÖ Todas las gr√°ficas actualizadas');
    } else {
        console.log('‚ùå Chart.js no disponible para actualizar gr√°ficas');
    }
}

// Hacer funciones globales
window.debugCharts = debugCharts;
window.initializeDashboard = initializeDashboard;
window.showTab = showTab;
window.updateAllCharts = updateAllCharts;
window.updateNetWorth = updateNetWorth;
window.updateAssetsList = updateAssetsList;
window.updateLiabilitiesList = updateLiabilitiesList;
window.updateAmortizationInsights = updateAmortizationInsights;
window.loadAssetsTab = loadAssetsTab;
window.showAddAssetModal = showAddAssetModal;
window.showAddLiabilityModal = showAddLiabilityModal;
window.showAssetsList = showAssetsList;
window.showLiabilitiesList = showLiabilitiesList;
window.showNetWorthSettings = showNetWorthSettings;
window.showSavingsConfiguration = showSavingsConfiguration;

// Inicializar autom√°ticamente cuando se carga la p√°gina
document.addEventListener('DOMContentLoaded', () => {
    console.log('=== DOM CARGADO ===');
    setTimeout(() => {
        initializeDashboard();
    }, 100);
});

// Tambi√©n inicializar cuando la ventana se carga completamente
window.addEventListener('load', () => {
    console.log('=== VENTANA CARGADA COMPLETAMENTE ===');
    setTimeout(() => {
        console.log('Verificando componentes...');
        console.log('Chart.js:', typeof Chart !== 'undefined');
        
        if (typeof Chart !== 'undefined') {
            console.log('‚úÖ Chart.js disponible, forzando actualizaci√≥n...');
            createCategoryChart();
            createTrendsChart();
            createIncomeExpensesChart();
        } else {
            console.log('‚ùå Chart.js no disponible');
        }
    }, 500);
});

console.log('=== VEEDOR CHARTS SIMPLE CARGADO ===');
